<?xml version="1.0"?>
<launch>

  <arg name="leo_vcu_param_path" default="$(find-pkg-share leo_vcu_driver)/config/leo_vcu.param.yaml"/>

  <!-- vehicle info -->
  <arg name="vehicle_info_param_file" default="$(find-pkg-share vehicle_info_util)/config/vehicle_info.param.yaml"/>

  <!-- vehicle info -->
  <arg name="interface_mod" default="CAN" description="interface mod of driver: CAN or Serial"/>

  <!-- vehicle interface -->
  <node pkg="leo_vcu_driver" exec="leo_vcu_driver" name="leo_vcu_driver" output="screen">
    <param from="$(var leo_vcu_param_path)"/>
    <param name="interface_mod" value="$(var interface_mod)"/>
    <param from="$(var vehicle_info_param_file)"/>
  </node>

  <!-- socket can -->
  <group if="$(eval &quot;'$(var interface_mod)' == 'CAN' &quot;)">
    <arg name="interface" default="can0" />
    <arg name="receiver_interval_sec" default="0.01" />
    <arg name="sender_timeout_sec" default="0.01" />
    <arg name="enable_can_fd" default="false" />

    <include file="$(find-pkg-share ros2_socketcan)/launch/socket_can_receiver.launch.py">
      <arg name="interface" value="$(var interface)" />
      <arg name="interval_sec" value="$(var receiver_interval_sec)" />
      <arg name="enable_can_fd" value="$(var enable_can_fd)" />
    </include>

    <include file="$(find-pkg-share ros2_socketcan)/launch/socket_can_sender.launch.py">
      <arg name="interface" value="$(var interface)" />
      <arg name="timeout_sec" value="$(var sender_timeout_sec)" />
      <arg name="enable_can_fd" value="$(var enable_can_fd)" />
    </include>
  </group>

</launch>
